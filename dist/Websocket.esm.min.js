var e={name:"Vue-simple-Ws",props:{url:{type:String,required:!0},debug:{type:Boolean,default:!1},reconnect:{type:Boolean,default:!0}},data:function(){return{instance:null,reconnectFailureTimes:0,reconnectTimer:null,needReconnet:!0,WS:window.WebSocket?new window.WebSocket(this.url):new window.MozWebSocket(this.url)}},watch:{},mounted:function(){this.structureWebSocket()},methods:{structureWebSocket:function(){var e=this;e.WS.onopen=function(){e.printLog("ws is connected"),e.$emit("onOpen",e.sendData)},e.WS.onmessage=function(t){e.printLog("wsData:".concat(t.data)),e.$emit("onMessage",t.data)},e.WS.onclose=function(t){var n=t.code,o=t.reason,i=t.wasClean;e.printLog("WS is disconneted,reason:".concat(o)),e.$emit("onClose",n,o,i),e.reconnect&&e.needReconnet&&(e.reconnectFailureTimes++,e.reconnectFailureTimes<3&&(e.reconnectTimer=window.setTimeout(function(){e.setState({WS:window.WebSocket?new window.WebSocket(e.url):new window.MozWebSocket(e.url)}),e.structureWebSocket()},15e3)))},e.WS.onerror=function(t){e.$emit("onError",t)}},sender:function(e){this.WS&&1===this.WS.readyState&&this.WS.send(e)},sendData:function(e){return this.sender(e)},printLog:function(e){this.debug&&console.log(e)},destroy:function(){this.needReconnet=!1,clearTimeout(this.reconnectTimer),this.printLog("WS is close"),this.WS.close()}},beforeDestroy:function(){this.destroy()}};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}("");"undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());export default(function(e,t,n,o,i,r,s,c,d,a){"boolean"!=typeof s&&(d=c,c=s,s=!1);const u="function"==typeof n?n.options:n;let l;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),o&&(u._scopeId=o),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=l):t&&(l=s?function(e){t.call(this,a(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,c(e))}),l)if(u.functional){const e=u.render;u.render=function(t,n){return l.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,l):[l]}return n}({render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)},staticRenderFns:[]},void 0,e,"data-v-3472e965",!1,void 0,!1,void 0,void 0,void 0));
//# sourceMappingURL=Websocket.esm.min.js.map
