"use strict";var script={name:"Vue-simple-Ws",props:{url:{type:String,required:!0},debug:{type:Boolean,default:!1},reconnect:{type:Boolean,default:!0}},data:function(){return{instance:null,reconnectFailureTimes:0,reconnectTimer:null,needReconnet:!0,WS:window.WebSocket?new window.WebSocket(this.url):new window.MozWebSocket(this.url)}},watch:{},mounted:function(){this.structureWebSocket()},beforeDestroy:function(){this.destroy()},methods:{structureWebSocket:function(){var e=this;e.WS.onopen=function(){e.printLog("ws is connected"),e.$emit("onOpen",e.sendData)},e.WS.onmessage=function(t){e.printLog("wsData:".concat(t.data)),e.$emit("onMessage",t.data)},e.WS.onclose=function(t){var n=t.code,o=t.reason,i=t.wasClean;e.printLog("WS is disconneted,reason:".concat(o)),e.$emit("onClose",n,o,i),e.reconnect&&e.needReconnet&&(e.reconnectFailureTimes++,e.reconnectFailureTimes<3&&(e.reconnectTimer=window.setTimeout(function(){e.setState({WS:window.WebSocket?new window.WebSocket(e.url):new window.MozWebSocket(e.url)}),e.structureWebSocket()},15e3)))},e.WS.onerror=function(t){e.$emit("onError",t)}},sender:function(e){this.WS&&1===this.WS.readyState&&this.WS.send(e)},sendData:function(e){return this.sender(e)},printLog:function(e){this.debug&&console.log(e)},destroy:function(){this.needReconnet=!1,clearTimeout(this.reconnectTimer),this.printLog("WS is close"),this.WS.close()}}};function styleInject(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var css="";function normalizeComponent(e,t,n,o,i,s,r,c,_,d){"boolean"!=typeof r&&(_=c,c=r,r=!1);const a="function"==typeof n?n.options:n;let u;if(e&&e.render&&(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,i&&(a.functional=!0)),o&&(a._scopeId=o),s?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,_(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},a._ssrRegister=u):t&&(u=r?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,c(e))}),u)if(a.functional){const e=a.render;a.render=function(t,n){return u.call(n),e(t,n)}}else{const e=a.beforeCreate;a.beforeCreate=e?[].concat(e,u):[u]}return n}styleInject(css);const isOldIE="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var __vue_script__=script,__vue_render__=function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)},__vue_staticRenderFns__=[],__vue_inject_styles__=void 0,__vue_scope_id__="data-v-55449c5c",__vue_module_identifier__=void 0,__vue_is_functional_template__=!1,__vue_component__=normalizeComponent({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,!1,void 0,void 0,void 0);module.exports=__vue_component__;
//# sourceMappingURL=Websocket.min.js.map
